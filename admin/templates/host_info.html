{% extends "layout.html" %}
{% block title %}Host Info{% endblock %}
{% block body %}
{{ super() }}
<h2 class="page-header">Host Information
    <button title="Resetting the host when no cluster at it."
           class="btn btn-danger btn-default btn-primary pull-sm-right"
           data-id="{{item.id}}"
           data-title="{{ item.name }}"
           data-toggle="modal" data-target="#reset_host_confirm"
           style="float: right;"
            {% if item.clusters|length > 0 %}
           disabled
            {% endif %} >
        <span class="glyphicon glyphicon-time" aria-hidden="true"></span>
    </button>

&nbsp; &nbsp;

    <button title="Try best to clean unused clusters at this host"
           class="btn btn-info btn-default btn-primary pull-sm-right"
           id="clean_host_button" data-id="{{item.id}}"
           style="float: right;"
            {% if item.clusters|length <= 0 %}
           disabled
            {% endif %} >
        <span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
    </button>

    <button
           class="btn btn-default btn-primary pull-sm-right"
           id="fillup_host_button" data-id="{{item.id}}"
           title="Fill up this host to its capacity = {{ item.capacity|string }}"
           style="float: right;"
            {% if item.clusters|length >= item.capacity %}
           disabled
            {% endif %}>
        <span class="glyphicon glyphicon-chevron-up" aria-hidden="true"></span>
    </button>

    <button title="Config the host"
           class="btn btn-default btn-info btn-primary edit_host_button
           pull-sm-right"
           id="config_host_button"  data-id="{{item.id}}"
           style="float: right;" >
        <span class="glyphicon glyphicon-cog" aria-hidden="true"></span>
        </button>
</h2>

    <div class="container-fluid">
        <dl class="dl-horizontal">
            <dt>Name<dt> <dd>{{item.name}}</dd>
            <dt>Id<dt> <dd>{{item.id}}</dd>
        <dt>Status<dt> <dd>{{item.status}}</dd>
        <dt>Schedulable<dt> <dd>{{item.schedulable}}</dd>
        <dt>Type<dt> <dd>{{item.type}}</dd>
        <dt>Capacity<dt> <dd>{{item.capacity|string}}</dd>
        <dt>Host URL<dt> <dd>{{item.daemon_url}}</dd>
        <dt>Log Type<dt> <dd>{{item.log_type}}</dd>
        <dt>Log Server<dt> <dd>{{item.log_server}}</dd>
        <dt>Create Time<dt> <dd>{{item.create_ts}}</dd>
        <dt>Clusters<dt> <dd>
        {% for c in item.clusters %}
           <a href="/cluster_info/{{ c }}">{{ c }}</a><br>
        {% endfor %}
    </dd>
    </dl>

    <div class="modal fade" id="reset_host_confirm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                    <h4 class="modal-title" id="myModalLabel">Confirm Delete</h4>
                </div>
                <div class="modal-body">
                    <p>You are about to <font color="red">reset</font> the
                        host <font color="red"><i id="title"></i></font>, this
                            procedure is
                        irreversible.</p>
                    <p>Do you want to proceed?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger btn-ok">Delete</button>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}